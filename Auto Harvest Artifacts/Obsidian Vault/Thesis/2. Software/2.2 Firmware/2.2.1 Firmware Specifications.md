The Auto Harvest firmware is designed to operate as a **self-contained, intelligent microcontroller system**, responsible for real-time sensing, actuator control, connectivity management, and communication with the cloud backend via MQTT. It is deployed on an **ESP8266-based development board**, but was written in a fully modular and portable manner to support future migration to more powerful chips like the **ESP32**.

The firmware supports:

- Periodic polling of **six key sensors**, including temperature, pH, humidity, and TDS
    
- Actuator control via relays for water and air pumps
    
- Live updates to a **1602 LCD display**, including real-time status messages and telemetry
    
- A fully embedded **Wi-Fi Access Point (AP) mode for pairing**, allowing field configuration without external tools
    
- **EEPROM-backed persistent storage** of Wi-Fi credentials, MQTT settings, and calibration data
    
- Bi-directional **MQTT communication** with the backend, including command handling and telemetry publishing
    
- **Timer-based logic loops** to avoid blocking behavior and maintain performance
    
- **Safety automation**, such as pump shutdown on water flow failure
    

### ðŸ”Œ Self-Reliant Operation

Once powered on, the firmware:

1. Loads stored configuration (SSID, password, calibration) from EEPROM
    
2. Attempts to connect to Wi-Fi; falls back to AP mode if connection fails
    
3. Upon Wi-Fi connection, it establishes a secure MQTT session and begins normal operation
    
4. Periodically reads all sensors and sends telemetry to the backend
    
5. Listens for incoming MQTT commands and executes them (e.g., toggling relays)
    
6. Responds to sensor anomalies (e.g., no flow while pump is active) with internal safety logic and MQTT event reporting
    

### ðŸ§© System Composition

The firmware is structured around a global `AppContext`, which initializes and holds references to:

- The **Wi-Fi Manager** (`WiFiManagerService`)
    
- **Web Server** for pairing UI
    
- **Disk Manager** for EEPROM access
    
- **Module Manager** for actuator initialization
    
- **Data Collector** for structured telemetry readings
    
- **MQTT Client** for backend communication
    

This context-driven approach avoids global variables, improves encapsulation, and makes the firmware easier to extend or test.
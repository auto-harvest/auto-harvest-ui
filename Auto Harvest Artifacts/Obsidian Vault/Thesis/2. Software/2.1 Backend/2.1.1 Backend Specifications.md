The Auto Harvest backend is the **central coordination point** for the entire IoT platform. It bridges communication between hardware devices, the mobile/web client, and cloud services — enabling real-time control, data logging, user management, and feedback mechanisms.

Core responsibilities include:

- **User Authentication & Authorization**  
    Secure signup/login endpoints issue JSON Web Tokens (JWT) for stateless session management. Tokens are validated server-side via custom middleware.
    
- **Device Management & Metadata**  
    Users can register and manage devices ("controllers") which represent the physical hydroponic units. Each controller maintains metadata such as owner, location, and operational state.
    
- **Sensor Data Ingestion**  
    Devices periodically publish environmental readings via MQTT (temperature, humidity, pH, TDS, etc.). These are validated, timestamped, and stored in MongoDB through the `sensorLog.service.ts`.
    
- **Command Routing**  
    Commands issued via the mobile app (e.g., "start pump", "adjust lighting") are received over HTTP and routed to devices via MQTT. This ensures devices stay stateless and lightweight.
    
- **Notification Management**  
    Alert conditions (e.g., low water level, high salinity) are detected by the backend and delivered as **push notifications** using the `expo-server-sdk`.
    
- **Real-time WebSocket Streaming**  
    The backend exposes a socket connection via `socket.io`, allowing clients to subscribe to sensor logs, system alerts, or other real-time updates.
    

The backend is hosted in **Google Kubernetes Engine (GKE)** and connects to external services such as **MongoDB**, **Cloud Storage**, and **Cloudflare-proxied APIs**. Autoscaling and managed load balancing are handled via GCP (see Sections 5.1.4–5.1.7).
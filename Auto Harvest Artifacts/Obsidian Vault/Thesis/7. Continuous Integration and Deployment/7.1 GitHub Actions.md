The Auto Harvest backend uses **GitHub Actions** as its continuous integration engine. The CI pipeline is responsible for verifying code integrity, building Docker images, and triggering deployments via Google Cloud Platform (GCP).

#### ‚öôÔ∏è Backend Workflow

A single workflow (`ci.yml`) handles backend services. It is triggered on **push events to the `main` branch**, which is protected by **pull request requirements and code reviews**.

This workflow:

- Authenticates to GCP using a service account secret
    
- Prepares the environment with GKE credentials, `kubectl`, Docker CLI, and `node`
    
- Uses [Nx](https://nx.dev/) to detect affected services and conditionally trigger Docker builds or Kubernetes pushes
    
- Caches `node_modules` and ESLint results for speed
    
- Performs linting to ensure code standards are enforced
    

The workflow is **production-only** at this stage, but will be extended to include staging in the near future.

#### üõ† Frontend CI ‚Äì In Progress

The frontend currently lacks a dedicated CI workflow. It does not use Nx, and builds are handled via manual or scripted processes. A future workflow will:

- Build and upload static files to GCS
    
- Invalidate Cloudflare cache
    
- Allow staging and production testing
    

#### üîê Secrets and Security

- GitHub Secrets are used to store sensitive credentials, including a GCP service account key (`GCP_SECRET`)
    
- These secrets are mounted into the workflow environment using `google-github-actions/auth`
    
- Additional runtime secrets (e.g., broker URIs) are mounted in Kubernetes via encrypted **ConfigMaps**
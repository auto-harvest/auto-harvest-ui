To support and extend the CI/CD pipeline, the Auto Harvest project includes a set of custom shell and PowerShell scripts that enable **environment-specific deployments**, **local development configuration**, and **manual debugging or rollback** workflows. These scripts are housed in the `ci/scripts/` directory of the project repository and are used both within CI workflows and standalone by developers.

---

#### üì¶ Backend Deployment (`build.sh`)

This script automates the Docker build and deployment process for backend services. It is invoked automatically by the CI pipeline through the Nx task runner (`docker-push`), but it can also be run manually for debugging or rapid iteration.

Steps include:

- Retrieving the latest commit SHA (`NX_HEAD`)
    
- Building the service with `yarn nx run <service>:docker-build`
    
- Tagging the image for **Artifact Registry** (`:latest` and `:<sha>`)
    
- Pushing to GCP's private registry
    
- Applying the new image to the Kubernetes deployment via `kubectl set image`
    

Image history can be referenced from GitHub commits, allowing manual rollbacks using SHA digests when needed.

---

#### üåê Frontend Deployment (`actions-front.sh`)

This script handles the deployment of the web frontend to a **Google Cloud Storage bucket**. It:

- Runs a targeted build using `yarn nx run <project>:build-<env>`
    
- Deletes the existing project folder in the bucket
    
- Uploads the new static assets
    
- Invalidates the **Cloud CDN cache** using `gcloud compute url-maps invalidate-cdn-cache`
    

The script detects the deployment **mode (dev/stage/prod)** based on the current Git branch and is triggered either manually or through Nx (`bucket-push`) as part of CI.

---

#### üñ• Local DNS Configuration (PowerShell)

For local Kubernetes development, a PowerShell script is included to:

- Add a custom DNS entry (`127.0.0.1 local.net`) to the Windows `hosts` file
    
- Allow the **local cluster‚Äôs load balancer** to be resolved by name
    

This script:

- Requires administrator privileges
    
- Automatically backs up the hosts file
    
- Avoids duplicate entries by checking for existing rules
    

It is intended for developer use and is stored in the repository alongside other dev tools to support a shared and predictable local environment.

---

These helper scripts ensure that developers can work independently, CI can remain clean and minimal, and infrastructure can adapt to both cloud and local workflows. Over time, these scripts may be wrapped in CLI tools or replaced with Terraform/Helm for broader scale automation.